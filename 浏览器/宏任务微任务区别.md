<!-- @format -->

宏任务：当前调用栈中执行的代码成为宏任务（主代码块，定时器等等）。
微任务： 当前（此次事件循环中）宏任务执行完，在下一个宏任务开始之前需要执行的任务，可以理解为回调事件（promise.then，proness.nextTick 等等）。
宏任务中的事件放在 task queue 中，由事件触发线程维护；微任务的事件放在微任务队列中，由 JS 引擎线程维护。
运行机制
在执行栈中执行一个宏任务。

执行过程中遇到微任务，将微任务添加到微任务队列中。

当前宏任务执行完毕，立即执行微任务队列中的任务。

当前微任务队列中的所有任务执行完毕后。检查渲染，GUI 线程接管渲染。

渲染完毕后，JS 线程接管，开启下一次事件循环，执行下一次宏任务（事件队列中取）。

https://blog.csdn.net/u012925833/article/details/89306184#%E5%BE%AE%E4%BB%BB%E5%8A%A1
