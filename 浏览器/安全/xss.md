<!-- @format -->

Cross Site Scripting 跨站脚本攻击
HTML/DOM 中注入恶意脚本

1. document.cookie 窃取 cookie
2. addEventListener 监听用户事件
3. 修改 DOM 伪造登录窗口
4. 弹窗广告

## 存储型 XSS

首先黑客利用站点漏洞将一段恶意 JavaScript 代码提交到网站的数据库中；
然后用户向网站请求包含了恶意 JavaScript 脚本的页面；当
用户浏览该页面的时候，恶意脚本就会执行

没有转码

## 反射型 XSS

我们会发现用户将一段含有恶意代码的请求提交给 Web 服务器
Web 服务器接受请求的时候，又将恶意代码传送给客户端
恶意代码运行

例如：点击恶意右键，链接

## 基于 DOM 的 XSS 攻击

基于 DOM 的 XSS 攻击是不牵涉到页面 Web 服务器的。具体来讲，黑客通过各种手段将恶意脚本注入用户的页面中，比如通过网络劫持在页面传输过程中修改 HTML 页面的内容，这种劫持类型很多，有通过 WiFi 路由器劫持的，有通过本地恶意软件来劫持的，它们的共同点是在 Web 资源传输过程或者在用户使用页面的过程中修改 Web 页面的数据。

## 防范

1. <script>标签被转换为&lt;script&gt
2. 限制加载其他域下的资源文件，这样即使黑客插入了一个 JavaScript 文件，这个 JavaScript 文件也是无法被加载的；
3. 禁止向第三方域提交数据，这样用户数据也不会外泄；
4. 禁止执行内联脚本和未授权的脚本；
5. 提供了上报机制，这样可以帮助我们尽快发现有哪些 XSS 攻击，以便尽快修复问题。
6. httpOnly，这样就不可以通过JS获取cookie

除去架构不谈，就产品、后端、前端、测试而言。
产品： 1.业务逻辑层面安全验证，保证即使被攻击也要尽量避免或减少损失，如：资金转出、敏感信息操作（修改登录密码、支付密码）等
后端： 1.存储型和反射性 XSS，后端占比较大，考虑到可以通过接口绕过前端，所以内容编码后端处理比较可靠。 2.重点头信息返回 httponly，这也需要后端实现
前端： 1.基于 DOM 的 XSS 攻击，CSP 等前端技术运用，这边主要是前端
测试： 1.丰富测试框架，正对输入框：长度、类型、是否为空、是否重复、组成范围外，也应了解学习安全性测试：XSS 攻击、Sql 注入等攻击类型。
总体而言，个人觉得前端在 XSS 攻击中责任占比不大。
