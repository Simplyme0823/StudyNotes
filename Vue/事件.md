<!-- @format -->

原生事件与自定义事件
v-on 指令

## 编译阶段

capture once passive 做处理
el.nativeEvents 与 el.events 对象的 key 为事件名称 value 为 rangeSetItem 返回值，包含绑定的值，修饰符

dynamic 为事件名称是否为动态绑定的

## genCode

分两种情况，含修饰符
含修饰符对鼠标键盘做一些处理，所以肯定要传入 event 参数，会在这里做一层处理

不含修饰符

1. 箭头函数/匿名函数
2. 路径写法
   这两种直接返回赋值

这种外面包一层 function($event){return ...}
3.  handler($event)

最后返回 data.on:{} data.nativeOn:{}

## 渲染

生成占位符 VNode 的时候 listeners = data.on
data.on = data.nativeOn

然后 updateDOMListeners 给真实 Dom 元素添加 (target = vnode.elm)

子组件渲染的时候获取占位符 VNode 的 listeners opts.\_parentListeners = vnodeComponentOptions.listeners
initEvent => updateComponentListeners(vm, listeners)
add remove 就是 vue 的发布订阅

prepatch 的 时候也会调用 updateComponentListeners

使用 v-on 指令
bindObjectListeners 将对象形式的监听函数添加到 data.on 中
