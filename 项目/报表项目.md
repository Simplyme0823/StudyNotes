<!-- @format -->

## vue-grid-layout

interact.js 操作 DOM

1. 直接采用拖拽 div 方式，自由度太高，反而需要处理更多问题
2. vue-grid-layout 直接即用，节省开发时间，而且功能完全满足拖拽排版的需求
3. 性能不错，使用 css3 tanslateX

### 优化

使用 html2canvas 进行网页截图，但是使用了 css3 的 transform 属性，导致样式损坏了，需要解决这个问题
想法：在报表预览/展示的时候，是无法对报表进行编辑的，因此在此情况下，直接重写布局避免使用 css transform 属性

## 对绘图功能的封装

使用了 echarts
穷举法，把常用的图形绘制全部封装成一个个函数
另外，在界面上更改绘图参数的时候，重新调用这些函数，更新图片

## 优化

此部分的优化，主要是用 performance 面板来记录信息
在点解切换组件的时候，组件内容变更导致配置内容面板需要使用跟随着变更，数据太多，导致页面卡顿
将分解 280ms 的长任务成四个小任务(setTimeout)

## 为什么要用中间件缓存

作用：每周定时更新报表的配置数据，并且在前端显示最后更新时间

1. 因为报表的数据源更新频率多数为一周，没有必要每次都访问数据库，并且生成报表配置也需要耗费时间。
2. 考虑缓存数据损坏情况：直接读取数据库数据生成新的模板，然后返回前端并更新缓存。
3. 如果数据库读取也发生问题，前端提示用户，并且将错误记录下来，便于后期追踪。

## 优化

1. 考虑到数据源数量更多以后，报表数据的实时性，采用数据源最小更新频率为更新周期，修改配置更新代码
2. 数据权限

## 组件封装

1. 基于 elementUI 的 tab 组件封装了最基础的组件(结构)，主要使用了 vue 的插槽，来提高报表组件可展示内容的灵活性。
2. 在基础组件上再开发特定样式的组件
3. 样式是参考 ant-design

## 优化

目前没有想到要优化的点
